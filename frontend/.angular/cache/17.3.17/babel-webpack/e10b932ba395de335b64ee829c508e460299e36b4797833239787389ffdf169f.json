{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from '../services/api';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSelectModule } from '@angular/material/select';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/checkbox\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/select\";\nimport * as i9 from \"@angular/material/core\";\nfunction ProductFormComponent_mat_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", s_r1.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(s_r1.name);\n  }\n}\nfunction ProductFormComponent_mat_option_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", c_r2.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(c_r2.name);\n  }\n}\nexport let ProductFormComponent = /*#__PURE__*/(() => {\n  class ProductFormComponent {\n    constructor() {\n      this.fb = inject(FormBuilder);\n      this.api = inject(ApiService);\n      this.route = inject(ActivatedRoute);\n      this.router = inject(Router);\n      this.sizes = [];\n      this.colors = [];\n      this.form = this.fb.group({\n        sku: ['', Validators.required],\n        name: ['', Validators.required],\n        description: [''],\n        price: ['0.00', Validators.required],\n        stock: [0, Validators.required],\n        active: [true],\n        sizeId: [null],\n        colorId: [null]\n      });\n    }\n    ngOnInit() {\n      this.api.listSizes().subscribe(s => this.sizes = s);\n      this.api.listColors().subscribe(c => this.colors = c);\n      const idParam = this.route.snapshot.paramMap.get('id');\n      if (idParam) {\n        this.id = Number(idParam);\n        this.api.getProduct(this.id).subscribe(p => {\n          this.form.patchValue({\n            sku: p.sku,\n            name: p.name,\n            description: p.description || '',\n            price: p.price,\n            stock: p.stock,\n            active: p.active ?? true,\n            sizeId: p.size?.id ?? null,\n            colorId: p.color?.id ?? null\n          });\n        });\n      }\n    }\n    submit() {\n      const raw = this.form.getRawValue();\n      const value = {\n        sku: String(raw.sku ?? ''),\n        name: String(raw.name ?? ''),\n        description: raw.description || undefined,\n        price: String(raw.price ?? '0.00'),\n        stock: Number(raw.stock ?? 0),\n        active: !!raw.active,\n        sizeId: raw.sizeId ?? null,\n        colorId: raw.colorId ?? null\n      };\n      if (this.id) {\n        this.api.updateProduct(this.id, value).subscribe(() => this.router.navigate(['/products']));\n      } else {\n        this.api.createProduct(value).subscribe(() => this.router.navigate(['/products']));\n      }\n    }\n    static {\n      this.ɵfac = function ProductFormComponent_Factory(t) {\n        return new (t || ProductFormComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductFormComponent,\n        selectors: [[\"app-product-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 45,\n        vars: 6,\n        consts: [[1, \"card\"], [2, \"display\", \"grid\", \"gap\", \"12px\", \"max-width\", \"520px\", 3, \"ngSubmit\", \"formGroup\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"placeholder\", \"SKU\", \"formControlName\", \"sku\"], [\"matInput\", \"\", \"placeholder\", \"Nombre\", \"formControlName\", \"name\"], [\"matInput\", \"\", \"placeholder\", \"Descripci\\u00F3n\", \"formControlName\", \"description\"], [\"matInput\", \"\", \"type\", \"number\", \"step\", \"0.01\", \"placeholder\", \"Precio\", \"formControlName\", \"price\"], [\"matInput\", \"\", \"type\", \"number\", \"step\", \"1\", \"placeholder\", \"Stock\", \"formControlName\", \"stock\"], [\"formControlName\", \"sizeId\"], [3, \"value\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"colorId\"], [\"formControlName\", \"active\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\"], [2, \"margin-right\", \"4px\"]],\n        template: function ProductFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function ProductFormComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵelementStart(4, \"mat-form-field\", 2)(5, \"mat-label\");\n            i0.ɵɵtext(6, \"SKU\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(7, \"input\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"mat-form-field\", 2)(9, \"mat-label\");\n            i0.ɵɵtext(10, \"Nombre\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(11, \"input\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"mat-form-field\", 2)(13, \"mat-label\");\n            i0.ɵɵtext(14, \"Descripci\\u00F3n\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"textarea\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"mat-form-field\", 2)(17, \"mat-label\");\n            i0.ɵɵtext(18, \"Precio\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(19, \"input\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"mat-form-field\", 2)(21, \"mat-label\");\n            i0.ɵɵtext(22, \"Stock\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(23, \"input\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"mat-form-field\", 2)(25, \"mat-label\");\n            i0.ɵɵtext(26, \"Talla\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"mat-select\", 8)(28, \"mat-option\", 9);\n            i0.ɵɵtext(29, \"Sin talla\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(30, ProductFormComponent_mat_option_30_Template, 2, 2, \"mat-option\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(31, \"mat-form-field\", 2)(32, \"mat-label\");\n            i0.ɵɵtext(33, \"Color\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"mat-select\", 11)(35, \"mat-option\", 9);\n            i0.ɵɵtext(36, \"Sin color\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(37, ProductFormComponent_mat_option_37_Template, 2, 2, \"mat-option\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(38, \"mat-checkbox\", 12);\n            i0.ɵɵtext(39, \"Activo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"div\")(41, \"button\", 13)(42, \"mat-icon\", 14);\n            i0.ɵɵtext(43, \"save\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(44, \" Guardar \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\"\", ctx.id ? \"Editar\" : \"Nuevo\", \" Art\\u00EDculo\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(25);\n            i0.ɵɵproperty(\"value\", null);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.sizes);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"value\", null);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.colors);\n          }\n        },\n        dependencies: [CommonModule, i1.NgForOf, ReactiveFormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, MatFormFieldModule, i3.MatFormField, i3.MatLabel, MatInputModule, i4.MatInput, MatCheckboxModule, i5.MatCheckbox, MatButtonModule, i6.MatButton, MatIconModule, i7.MatIcon, MatSelectModule, i8.MatSelect, i9.MatOption],\n        encapsulation: 2\n      });\n    }\n  }\n  return ProductFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}